angular.module("app",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("main",{url:"/",views:{user:{templateUrl:"templates/user.html"},service:{templateUrl:"templates/service.html"},reviews:{templateUrl:"templates/reviews.html",controller:"reviewsController",controllerAs:"reviewsCtrl"}}}),t.otherwise("/")}]),angular.module("app").controller("reviewsController",["$rootScope","$filter","reviewsFactory",function(e,t,r){function n(e){var t;e?(t=angular.element(document.querySelector(".reviews__nav")).children()[0],angular.element(angular.element(document.querySelector(".reviews__nav")).children()[1]).removeClass("reviews__nav_link-active")):(t=angular.element(document.querySelector(".reviews__nav")).children()[1],angular.element(angular.element(document.querySelector(".reviews__nav")).children()[0]).removeClass("reviews__nav_link-active")),angular.element(t).addClass("reviews__nav_link-active")}var a,l=this;l.getReviews=function(e){a=e;var i=r.get();return n(a),l.reviews=a?t("limitTo")(i,3,-3):i},l.addReview=function(e){r.set(e),l.text=""},e.$on("reviews_update",function(){l.getReviews(a)})}]),angular.module("app").directive("ctrlEnterSubmit",function(){return{restrict:"A",link:function(e,t,r){t.bind("keydown",function(t){13===(t.keyCode||t.which)&&t.ctrlKey&&(t.preventDefault(),e.$apply(r.ctrlEnterSubmit))})}}}),angular.module("app").factory("reviewsFactory",["$rootScope",function(e){var t={},r=[{id:1,name:"Самуил",date:"13 октября 2011",text:"Привет, Верунь! ниче себе ты крутая. фотка класс!!!!"},{id:2,name:"Лилия Семёновна",date:"14 октября 2011",text:"Вероника, здравствуйте! Есть такой вопрос: Особый вид куниц жизненно стабилизирует кинетический момент, это и есть всемирно известный центр огранки алмазов и торговли бриллиантами?"},{id:3,name:"Лилия Семёновна",date:"14 октября 2011",text:"Вероника, здравствуйте! Есть такой вопрос: Особый вид куниц жизненно стабилизирует кинетический момент?"}];return t.set=function(t){if(t){var n=new Date,a="января,февраля,марта,апреля,мая,июня,июля,августа,сентября,октября,декабря".split(","),l={id:r.length+1,name:"Гость",date:n.getDate()+" "+a[n.getMonth()]+" "+n.getFullYear(),text:t};r.push(l),e.$broadcast("reviews_update")}},t.get=function(){return r},{set:t.set,get:t.get}}]);